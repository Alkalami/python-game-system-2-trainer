"""
README
Game name: System 2 trainer
How to play
This game have 2 level.
Easy: Add1
Hard: Add3
First, program will give your 4 digit. 
You have to plus the number that have mention in game level (For Add1, plus 1 and Add3 plus 3)
for each digit by seperate and type that in console such as 4956 in Add1 you have to type 5067 
You can earn your score by type your right answer if you put the wrong answer program will give you longest steak
That is your score.
"""
import random
import time
from threading import Thread

ans = None
too_slow = False

# check() used to limit time to put input in add_1 and add_3 function for 2 second 
def check():
    global too_slow
    global ans
    time.sleep(10)
    if ans != None: return
    too_slow = True

#genDigit() used to create number that have 4 digit in gameplay.
def gen_digit():
    digit = ''
    while len(digit) != 4:
        num = random.randint(0,9)
        num = str(num)
        digit += num
    return digit

# convert string to integer
def str_to_int(x):
    x = int(x)
    return x
    
def int_to_str(x):
    x = str(x)
    return x

def plus_1(digit):
    new_digit = ''
    for l in digit:
        l = str_to_int(l)
        l += 1
        if l == 10:
            l = 0
        l = int_to_str(l)
        new_digit += l
    return new_digit
    
def plus_3(digit):
    new_digit = ''
    for l in digit:
        l = str_to_int(l)
        l += 3
        if l >= 10:
            l %= 10
        l = int_to_str(l)
        new_digit += l
    return new_digit
    


def game_over():
    print("Game over!!")
    print("the correct answer is " + digit_ans + ".")
    print("Your longest streak is " + str(streak) + '.')

def time_over():
    print("Time over!!")
    print("Your longest streak is " + str(streak) + '.')
    
    
# still have to fix time limit.      
def add_1():
    flag = True
    global streak
    streak = 0 
    while flag:
        digit = gen_digit() 
        print(digit)
        global digit_ans
        digit_ans = plus_1(digit)
        Thread(target = check).start()
        ans = input("Input your here: ")
        if too_slow:
            time_over()
            flag = False
        else:
            if ans == digit_ans:
                print("Correct!!")
                streak += 1            
            else:
                game_over()
                flag = False
        
# still have to fix time limit.    
def add_3():
    flag = True
    global streak
    streak = 0 
    while flag:
        digit = gen_digit() 
        print(digit)
        global digit_ans
        digit_ans = plus_3(digit)
        Thread(target = check).start()
        ans = input("Input your here: ")
        if too_slow:
            time_over()
            flag = False
        else:
            if ans == digit_ans:
                print("Correct!!")
                streak += 1            
            else:
                game_over()
                flag = False
        
def sys_2_game():
    while True:
        print("Welcome!!")
        print("Choose Your challenge.")
        print("Press 1 to choose add_1")
        print("Press 3 to choose add_3")
        print("Your choice is ",end='')
        game = input()
        if game == '1':
            add_1()
        elif game == '3':
            add_3()
        else:
            continue        
        print("Try again? Y/N")
        status = input().upper()
        if status == "Y":
            pass
        elif status == "N":
            print("End game!!")
            print("Thank you for playing!!")
            break
        else:
            continue

sys_2_game()
